# Etelios Microservices Environment Configuration

# General Settings
NODE_ENV=development
# CORS Configuration - Use '*' to allow all origins, or specify comma-separated list
# For production, set this to your frontend URL(s) or '*' for all
# Example with all origins (less secure):
CORS_ORIGIN=*
# Example with specific origins:
# CORS_ORIGIN=https://etelios-frontend-appservice-eedgc2bmb7h5fzfy.centralindia-01.azurewebsites.net,http://localhost:3000

# Database
# SECURITY: Never commit connection strings to Git!
# 
# For Production: Use Azure Key Vault (see COSMOS-DB-CONNECTION-SETUP.md)
# For Local Development: Set MONGO_URI as environment variable at runtime
#
# Azure Key Vault Configuration (Production - Recommended):
# CRITICAL: Set these to use Key Vault for secure secret management
USE_KEY_VAULT=true
AZURE_KEY_VAULT_URL=https://etelios-keyvault.vault.azure.net/
AZURE_KEY_VAULT_NAME=etelios-keyvault
# SERVICE_NAME is REQUIRED when using Key Vault - determines which secrets to fetch
# IMPORTANT: SERVICE_NAME determines which Key Vault secret to fetch:
#   - SERVICE_NAME=auth-service → Fetches kv-mongo-uri-auth-service, uses auth database
#   - SERVICE_NAME=hr-service → Fetches kv-mongo-uri-hr-service, uses hr database
#   - SERVICE_NAME=attendance-service → Fetches kv-mongo-uri-attendance-service
# MONGO_URI=""  # Leave empty to use Key Vault (automatically fetches kv-mongo-uri-{SERVICE_NAME})
#
# Azure Cosmos DB Connection String Format (if not using Key Vault):
# IMPORTANT: Database name MUST be included before the ? character
# Format: mongodb://[username]:[password]@[host]:[port]/[DATABASE_NAME]?[options]
#
# For Auth Service:
# MONGO_URI=mongodb://etelios-mongo-db:password@etelios-mongo-db.mongo.cosmos.azure.com:10255/etelios_auth?ssl=true&replicaSet=globaldb&retrywrites=true&maxIdleTimeMS=120000&appName=@etelios-mongo-db@
#
# For HR Service:
# MONGO_URI=mongodb://etelios-mongo-db:password@etelios-mongo-db.mongo.cosmos.azure.com:10255/etelios_hr?ssl=true&replicaSet=globaldb&retrywrites=true&maxIdleTimeMS=120000&appName=@etelios-mongo-db@
#
# Local Development (set as environment variable, not in this file):
# export MONGO_URI="mongodb://localhost:27017/etelios_auth_service"
#
# Default (local MongoDB for development only):
# CRITICAL: In production, use Azure Key Vault or set MONGO_URI with database name
# Format: mongodb://[username]:[password]@[host]:[port]/[DATABASE_NAME]?[options]
# For Auth Service: .../etelios_auth?ssl=true
# For HR Service: .../etelios_hr?ssl=true
MONGO_URI=mongodb://localhost:27017/etelios_microservices

# Redis
REDIS_URL=redis://localhost:6379

# Authentication (CRITICAL - Required for login to work)
# These MUST be set in production. Use Azure Key Vault secrets: kv-jwt-secret and kv-jwt-refresh-secret
JWT_SECRET=your-64-character-jwt-secret-key-here-make-it-very-secure
JWT_REFRESH_SECRET=your-64-character-jwt-refresh-secret-key-here-make-it-very-secure
JWT_EXPIRY=1h
JWT_REFRESH_EXPIRY=7d

# External Services
AUTH_SERVICE_URL=http://auth-service:3001
NOTIFICATION_SERVICE_URL=http://notification-service:3015

# Email Configuration
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USER=your-email@gmail.com
EMAIL_PASS=your-app-password
EMAIL_FROM=noreply@etelios.com

# SMS Configuration (Twilio)
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=+1234567890
SMS_ENABLED=true

# File Storage
CLOUDINARY_CLOUD_NAME=your-cloudinary-cloud-name
CLOUDINARY_API_KEY=your-cloudinary-api-key
CLOUDINARY_API_SECRET=your-cloudinary-api-secret

# Azure Blob Storage
AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=yourstorage;AccountKey=yourkey;EndpointSuffix=core.windows.net
AZURE_STORAGE_CONTAINER_NAME=etelios-documents

# Security
ENCRYPTION_MASTER_KEY=your-32-character-encryption-key-here
ENCRYPTION_KEY=your-32-character-encryption-key-here

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=1000

# File Upload
MAX_FILE_SIZE=10485760
UPLOAD_PATH=./uploads

# Monitoring
LOG_LEVEL=info
LOG_FILE=logs/etelios.log

# Service Configuration (CRITICAL)
# PORT: Service port (3001 for auth-service, 3002 for hr-service, etc.)
PORT=3001
# SERVICE_NAME: Required when using Key Vault (auth-service, hr-service, etc.)
SERVICE_NAME=auth-service
# NODE_ENV: production or development
NODE_ENV=development

# Service Discovery
CONSUL_HOST=localhost
CONSUL_PORT=8500

# Message Queue
RABBITMQ_URL=amqp://admin:password@localhost:5672
RABBITMQ_QUEUE_PREFIX=etelios

# Kafka Configuration
# For local Kafka:
KAFKA_BROKERS=localhost:9092

# For Azure Event Hubs (Kafka-compatible):
# KAFKA_BROKERS=etelios-eventhub.servicebus.windows.net:9093
# KAFKA_SECURITY_PROTOCOL=SASL_SSL
# KAFKA_SASL_MECHANISM=PLAIN
# KAFKA_SASL_USERNAME=$ConnectionString
# EVENTHUB_CONNECTION_STRING=Endpoint=sb://etelios-eventhub.servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=YOUR_KEY_HERE
# EVENTHUB_NAME=etelios-events

# API Gateway
KONG_ADMIN_URL=http://localhost:8001
KONG_PROXY_URL=http://localhost:8000
